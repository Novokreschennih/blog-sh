---
layout: layouts/base.njk
eleventyNavigation:
  key: Home
  order: 1
---

{# --- БЛОК 1: ГЛАВНАЯ СТАТЬЯ (Featured Post) --- #}
{% set postslist = collections.posts | reverse %}
{% set featuredPost = postslist[0] %}
{% if featuredPost %}
<section class="featured-post">
  <div class="featured-post-content">
    <span class="featured-tag">Ключевая Статья</span>
    <h2><a href="{{ featuredPost.url | url }}">{{ featuredPost.data.title }}</a></h2>
    {% if featuredPost.data.description %}
      <p>{{ featuredPost.data.description }}</p>
    {% endif %}
  </div>
</section>
{% endif %}


{# --- БЛОК 2: ПОСЛЕДНИЕ НОВОСТИ (НОВЫЙ БЛОК) --- #}
{% set newslist = collections.news | reverse %}
{% if newslist.length %}
<section class="latest-news">
  <div class="section-header">
    <h2 class="section-title-small">Последние Новости</h2>
    <a href="/news/" class="view-all-link">Все новости →</a>
  </div>
  <ol class="news-snapshot-list">
  {%- for item in newslist | slice(0, 3) -%} {# Показываем только 3 последние новости #}
    <li class="news-snapshot-item">
      <time datetime="{{ item.date | htmlDateString }}">{{ item.date | readableDate }}</time>
      <h3><a href="{{ item.url | url }}">{{ item.data.title }}</a></h3>
    </li>
  {%- endfor -%}
  </ol>
</section>
{% endif %}


{# --- БЛОК 3: ОСТАЛЬНЫЕ СТАТЬИ (Сетка) --- #}
<h2 class="section-title">Глубокое Погружение</h2>
{% set postslistForGrid = postslist | slice(1) %}
{% include "postslist.njk" with { postslist: postslistForGrid } %}
